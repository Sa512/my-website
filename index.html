<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„</title>

  <!-- Ø®Ø· ÙˆÙŠØ¨ -->
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet" />

  <!-- Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¬Ø³ÙŠÙ…Ø§Øª -->
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

  <style>
    * {
      box-sizing: border-box;
      font-family: 'Tajawal', sans-serif;
    }

    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      background-color: #0b261a;
      overflow: hidden;
      color: white;
    }

    #particles-js {
      position: fixed;
      width: 100%;
      height: 100%;
      z-index: -1;
      background-color: #0b261a;
    }

    .container {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 15px;
      text-align: center;
    }

    .card {
      background-color: rgba(0, 0, 0, 0.75);
      padding: 30px 25px;
      border-radius: 15px;
      width: 100%;
      max-width: 420px;
      box-shadow: 0 0 15px #00ff88;
    }

    h2 {
      color: #00ff88;
      margin-bottom: 15px;
    }

    p {
      margin-bottom: 20px;
      font-size: 1.2rem;
    }

    .buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    button {
      background-color: #00cc66;
      border: none;
      color: white;
      font-weight: 600;
      font-size: 1rem;
      padding: 12px 20px;
      border-radius: 8px;
      cursor: pointer;
      flex: 1 1 45%;
      min-width: 120px;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #009944;
    }

    form {
      margin-top: 10px;
      display: none;
      text-align: right;
    }

    form.active {
      display: block;
    }

    input[type="text"],
    input[type="email"],
    input[type="number"],
    input[type="password"],
    input[type="tel"] {
      width: 100%;
      padding: 10px 12px;
      margin: 10px 0 20px 0;
      border-radius: 7px;
      border: none;
      background-color: #222;
      color: #eee;
      font-size: 1rem;
      direction: ltr;
    }

    /* Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ +966 Ø«Ø§Ø¨Øª ÙˆØ¬Ø²Ø¡ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ¹Ø¨Ø¦Ø© */
    .phone-wrapper {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
    }

    .phone-prefix {
      background-color: #0f3300;
      color: #0f9d58;
      padding: 10px 14px;
      border-radius: 7px;
      user-select: none;
      font-weight: bold;
      font-size: 1.1rem;
      border: none;
      width: 80px;
      text-align: center;
    }

    .phone-input {
      flex-grow: 1;
    }

    .error-message {
      color: #ff5555;
      font-size: 0.9rem;
      margin-top: -15px;
      margin-bottom: 15px;
      display: none;
      text-align: center;
    }

    .success-message {
      color: #00ff88;
      font-size: 1.1rem;
      margin-top: 20px;
      font-weight: 600;
    }

    @media (max-width: 480px) {
      .buttons {
        flex-direction: column;
      }

      button {
        flex: 1 1 100%;
      }
    }
  </style>
</head>
<body>
  <div id="particles-js"></div>

  <div class="container">
    <div class="card" id="mainCard">
      <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ÙˆÙ‚Ø¹Ù†Ø§ ğŸ«¡ğŸ‡¸ğŸ‡¦</h2>
      <p>Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø¯Ø®ÙˆÙ„:</p>

      <div class="buttons" id="roleButtons">
        <button onclick="selectType('user')">Ù…Ø³ØªØ®Ø¯Ù…</button>
        <button onclick="selectType('admin')">Ù…Ø´Ø±Ù</button>
      </div>

      <!-- ======== Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ======== -->
      <div id="userStep" class="hidden">
        <p>Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ</p>
        <div class="buttons">
          <button onclick="showUserLogin()">Ù†Ø¹Ù…</button>
          <button onclick="showUserRegister()">Ù„Ø§</button>
        </div>
      </div>

      <!-- ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ù…Ø³ØªØ®Ø¯Ù…: Ø¥Ø¯Ø®Ø§Ù„ Ø§ÙŠÙ…ÙŠÙ„ Ø£Ùˆ Ø¬ÙˆØ§Ù„ -->
      <form id="userLoginForm">
        <h2>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</h2>
        <input type="text" id="loginInput" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required />
        <div class="error-message" id="loginInputError">ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ§Ù„Ø­ Ø£Ùˆ Ø±Ù‚Ù… Ø¬ÙˆØ§Ù„ ÙŠØ¨Ø¯Ø£ Ø¨Ù€ +966</div>
        <button type="submit">Ø§Ø³ØªÙ…Ø±Ø§Ø±</button>
      </form>

      <!-- Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ OTP -->
      <form id="otpForm">
        <h2>Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ (OTP)</h2>
        <input type="text" id="otpInput" placeholder="Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚" required maxlength="6" />
        <div class="error-message" id="otpError">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² ØµØ­ÙŠØ­ Ù…ÙƒÙˆÙ† Ù…Ù† 6 Ø£Ø±Ù‚Ø§Ù…</div>
        <button type="submit">ØªØ­Ù‚Ù‚</button>
      </form>

      <!-- ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯ -->
      <form id="userRegisterForm">
        <h2>ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯</h2>
        <input type="text" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" required />
        <input type="number" placeholder="Ø§Ù„Ø¹Ù…Ø±" min="10" max="120" required />

        <input type="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required />

        <div class="phone-wrapper">
          <input class="phone-prefix" type="text" value="+966" disabled />
          <input class="phone-input" type="tel" id="phoneInput" placeholder="5xxxxxxxx" pattern="5[0-9]{8}" required />
        </div>
        <div class="error-message" id="phoneError">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø¨Ù€ 5 ÙˆÙŠØªÙƒÙˆÙ† Ù…Ù† 9 Ø£Ø±Ù‚Ø§Ù….</div>

        <button type="submit">Ø¥Ø±Ø³Ø§Ù„</button>
      </form>

      <!-- ======== Ù„Ù„Ù…Ø´Ø±Ù ======== -->
      <form id="adminForm">
        <h2>Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±Ù ğŸ”’</h2>
        <input type="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" id="adminEmail" required />
        <input type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" id="adminPass" required />
        <div class="error-message" id="adminError">ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</div>
        <button type="button" onclick="validateAdmin()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
      </form>

      <!-- ØµÙØ­Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù„Ù„Ù…Ø´Ø±Ù -->
      <div id="ordersPage" class="hidden">
        <h2>ğŸ“‹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h2>
        <p class="success-message">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø£ÙŠÙ‡Ø§ Ø§Ù„Ù…Ø´Ø±ÙØŒ Ù‡Ù†Ø§ Ø³ØªØ¸Ù‡Ø± Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù„Ø§Ø­Ù‚Ù‹Ø§.</p>
      </div>
    </div>
  </div>

  <script>
    // ØªØ®ÙÙŠ ÙƒÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ØªÙŠ Ù„ÙŠØ³Øª Ù†Ø´Ø·Ø©
    function hideAll() {
      document.getElementById('roleButtons').style.display = 'none';
      document.getElementById('userStep').classList.add('hidden');
      document.getElementById('userLoginForm').classList.remove('active');
      document.getElementById('userLoginForm').style.display = 'none';
      document.getElementById('otpForm').classList.remove('active');
      document.getElementById('otpForm').style.display = 'none';
      document.getElementById('userRegisterForm').classList.remove('active');
      document.getElementById('userRegisterForm').style.display = 'none';
      document.getElementById('adminForm').style.display = 'none';
      document.getElementById('ordersPage').classList.add('hidden');

      // Ø§Ø®ÙØ§Ø¡ ÙƒÙ„ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£
      document.getElementById('loginInputError').style.display = 'none';
      document.getElementById('otpError').style.display = 'none';
      document.getElementById('phoneError').style.display = 'none';
      document.getElementById('adminError').style.display = 'none';
    }

    // Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    function selectType(type) {
      hideAll();
      if (type === 'user') {
        document.getElementById('userStep').classList.remove('hidden');
      } else {
        document.getElementById('adminForm').style.display = 'block';
      }
    }

    // ØªØ¸Ù‡Ø± Ø£Ø³Ø¦Ù„Ø© Ù‡Ù„ Ø¹Ù†Ø¯Ù‡ Ø­Ø³Ø§Ø¨ØŸ
    function showUserLogin() {
      hideAll();
      document.getElementById('userLoginForm').classList.add('active');
      document.getElementById('userLoginForm').style.display = 'block';
    }

    function showUserRegister() {
      hideAll();
      document.getElementById('userRegisterForm').classList.add('active');
      document.getElementById('userRegisterForm').style.display = 'block';
    }

    // ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø§ÙŠÙ…ÙŠÙ„ Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„
    function isValidEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    }

    function isValidPhone(phone) {
      // ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø¨Ù€ +9665XXXXXXXX ÙˆÙŠÙƒÙˆÙ† 13 Ø±Ù…Ø² (Ù…Ø¹ +)
      return /^\+9665\d{8}$/.test(phone);
    }

    // Ù…Ø¹Ø§Ù„Ø¬Ø© ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… - Ø¥Ø¯Ø®Ø§Ù„ Ø¥ÙŠÙ…ÙŠÙ„ Ø£Ùˆ Ø±Ù‚Ù… Ø¬ÙˆØ§Ù„
    document.getElementById('userLoginForm').addEventListener('submit', function (e) {
      e.preventDefault();
      const input = document.getElementById('loginInput').value.trim();

      // Ø¥Ø°Ø§ Ø¨Ø¯Ø£ Ø¨Ù€ +966 Ø£Ùˆ 966 Ø£Ùˆ 05
      let phoneNumber = input;
      if (/^05/.test(input)) {
        phoneNumber = '+966' + input.slice(1);
      } else if (/^9665/.test(input)) {
        phoneNumber = '+' + input;
      }

      const validEmail = isValidEmail(input);
      const validPhone = isValidPhone(phoneNumber);

      if (!validEmail && !validPhone) {
        document.getElementById('loginInputError').style.display = 'block';
        return;
      }

      document.getElementById('loginInputError').style.display = 'none';

      // Ø­ÙØ¸ Ø§Ù„Ø±Ù‚Ù… Ù„Ù„Ø¥Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ Ø®Ø·ÙˆØ© OTP
      sessionStorage.setItem('userLoginIdentifier', validEmail ? input : phoneNumber);

      // Ø¥Ø¸Ù‡Ø§Ø± Ù†Ù…ÙˆØ°Ø¬ OTP
      showOTPForm();
    });

    // Ø¥Ø¸Ù‡Ø§Ø± Ù†Ù…ÙˆØ°Ø¬ OTP
    function showOTPForm() {
      document.getElementById('userLoginForm').classList.remove('active');
      document.getElementById('userLoginForm').style.display = 'none';

      const otpForm = document.getElementById('otpForm');
      otpForm.classList.add('active');
      otpForm.style.display = 'block';

      document.getElementById('otpInput').value = '';
      document.getElementById('otpError').style.display = 'none';

      // ÙÙŠ Ø§Ù„Ø­ÙŠØ§Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© ØªØ±Ø³Ù„ Ø±Ù…Ø² OTP Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‡Ù†Ø§!
      console.log("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ù„Ù‰:", sessionStorage.getItem('userLoginIdentifier'));
    }

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù…Ø² OTP
    document.getElementById('otpForm').addEventListener('submit', function (e) {
      e.preventDefault();
      const otpValue = document.getElementById('otpInput').value.trim();

      if (!/^\d{6}$/.test(otpValue)) {
        document.getElementById('otpError').style.display = 'block';
        return;
      }

      document.getElementById('otpError').style.display = 'none';

      alert('ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù…Ø² Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰');
      // Ù‡Ù†Ø§ Ù…Ù…ÙƒÙ† ØªØ­ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø£Ùˆ Ø®Ø¯Ù…Ø§ØªÙ‡
      // Ù…Ø«Ø§Ù„: window.location.href = "/user-dashboard.html";
    });

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯
    document.getElementById('userRegisterForm').addEventListener('submit', function (e) {
      e.preventDefault();

      const phoneInput = document.getElementById('phoneInput').value.trim();
      const phoneErrorEl = document.getElementById('phoneError');

      if (!/^5\d{8}$/.test(phoneInput)) {
        phoneErrorEl.style.display = 'block';
        return;
      }

      phoneErrorEl.style.display = 'none';

      const fullPhone = '+966' + phoneInput;
      alert(`ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!\nØ±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„: ${fullPhone}`);
      // Ù‡Ù†Ø§ ØªØ±Ø³Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø³ÙŠØ±ÙØ± Ø£Ùˆ ØªØ®Ø²Ù†Ù‡Ø§
    });

    // ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø±Ù
    function validateAdmin() {
      const email = document.getElementById('adminEmail').value.trim();
      const pass = document.getElementById('adminPass').value.trim();
      const error = document.getElementById('adminError');

      if (email === "" || pass === "") {
        error.textContent = "ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±";
        error.style.display = "block";
        return;
      }

      // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ù‚Ù‚ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø±Ù
      if (email === "admin@example.com" && pass === "123456") {
        error.style.display = "none";
        showOrdersPage();
      } else {
        error.textContent = "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©";
        error.style.display = "block";
      }
    }

    // Ø¹Ø±Ø¶ ØµÙØ­Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
    function showOrdersPage() {
      hideAll();
      document.getElementById('ordersPage').classList.remove('hidden');
    }

  </script>

  <script>
    // particles.js Ø§Ù„Ø®Ù„ÙÙŠØ©
    particlesJS("particles-js", {
      particles: {
        number: { value: 70, density: { enable: true, value_area: 800 } },
        color: { value: "#00ff88" },
        shape: { type: "circle" },
        opacity: { value: 0.6, random: false },
        size: { value: 3, random: true },
        line_linked: {
          enable: true,
          distance: 140,
          color: "#00ff88",
          opacity: 0.4,
          width: 1,
        },
        move: {
          enable: true,
          speed: 2,
          direction: "none",
          out_mode: "out",
        },
      },
      interactivity: {
        detect_on: "canvas",
        events: {
          onhover: { enable: true, mode: "grab" },
          onclick: { enable: false },
        },
        modes: {
          grab: { distance: 200, line_linked: { opacity: 0.5 } },
        },
      },
      retina_detect: true,
    });
  </script>
</body>
</html>
